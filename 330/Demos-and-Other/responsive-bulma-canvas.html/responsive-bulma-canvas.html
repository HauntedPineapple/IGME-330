<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello Bulma!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <style>
    	canvas{
    	  background-color: gray;
    	  width: 100%;
    	}
    </style>
  </head>
  <body>
  <nav class="navbar" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="navbar-item" href="https://bulma.io">
				<img src="https://bulma.io/images/bulma-logo.png" alt="Bulma: Free, open source, and modern CSS framework based on Flexbox" width="112" height="28">
			</a>

			<a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
				<span aria-hidden="true"></span>
			</a>
		</div>
	</nav>
  <section class="section has-background-primary">
    <div class="container">
      <h1 class="title">
        Hello World
      </h1>
      <p class="subtitle">
        My first website with <strong>Bulma</strong>!
      </p>
    </div>
  </section>
  <section class="section has-background-warning">
  	<div class="container">
  		<canvas></canvas>
  	</div>
  </section>
  <script>
  	// TODO - don't forget to handle delta time and pausing!
  	const canvas = document.querySelector("canvas");
  	canvas.width=640;
  	canvas.height=480;
  	const ctx = canvas.getContext("2d");
  	let counter = 0;
  	const sprite = {
  		x: 50,
  		y: 50,
  		radius: 10,
  		dx: Math.random() * 10 - 5,
  		dy: Math.random() * 10 - 5,
  		draw(ctx){
  			ctx.save();
  			ctx.fillStyle="red";
  			ctx.beginPath();
  			ctx.arc(this.x,this.y,this.radius,0,Math.PI * 2);
  			ctx.closePath();
  			ctx.fill();
  			ctx.restore();
  		},
  		move(){
  			this.x += this.dx;
  			this.y += this.dy;
  		},
  		bounceX(){
  			this.dx *= -1;
  		},
  		bounceY(){
  			this.dy *= -1;
  		}
  	};
  	
  	
  	const loop = () => {
  		requestAnimationFrame(loop);
  		ctx.save();
  		ctx.fillStyle="purple";
  		ctx.fillRect(0,0,640,480);
  		ctx.lineWidth=5;
  		ctx.strokeRect(0,0,640,480);
  		ctx.fillStyle = "yellow";
  		ctx.textAlign = "center";
  		ctx.textBaseline = "middle";
  		ctx.font="bold 20px sans-serif"
  		ctx.fillText(`Count: ${counter}`,320,240)
  		ctx.restore();
  		sprite.draw(ctx);
  		counter ++;
  		sprite.move();
  		if(sprite.x <= sprite.radius || sprite.x >= 640 -  sprite.radius) sprite.bounceX();
  		if(sprite.y <= sprite.radius || sprite.y >= 480 -  sprite.radius) sprite.bounceY();
  		console.log(canvas.width,canvas.height);
  	};
  	
  	loop();
  	
  	
  	
  </script>
  </body>
</html>